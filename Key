local key = 
local getKeyLink = ""

local exec = ""

local filePath = ""
local Discord = ""
local Website = ""

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local function isKeyValid(k)
	if typeof(key) == "function" then
		if key(k) then return true end
	else
		if k == key then return true end
	end
	return false
end

local function readLastKey()
	if isfile and isfile(filePath) then
		return readfile(filePath)
	end
	return nil
end

local function saveLastKey(k)
	if writefile then
		writefile(filePath, k)
	end
end

local lastKey = readLastKey()
if lastKey and isKeyValid(lastKey) then
	loadstring(game:HttpGet(exec))()
	return
end

local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "KeySystemUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 420, 0, 370)
MainFrame.Position = UDim2.new(0.5, -210, 0.5, -185)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.ClipsDescendants = true

local MainCorner = Instance.new("UICorner", MainFrame)
MainCorner.CornerRadius = UDim.new(0, 16) 

local Header = Instance.new("Frame", MainFrame)
Header.Size = UDim2.new(1, 0, 0, 70)
Header.BackgroundColor3 = Color3.fromRGB(75, 40, 150)

local HeaderCorner = Instance.new("UICorner", Header)
HeaderCorner.CornerRadius = UDim.new(0, 16)

local HeaderGradient = Instance.new("UIGradient", Header)
HeaderGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 50, 200)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 30, 150))
}
HeaderGradient.Rotation = 45

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(1, -40, 1, 0)
Title.Position = UDim2.new(0, 20, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = utf8.char(0x1F512) .. " KEY SYSTEM"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 24
Title.TextXAlignment = Enum.TextXAlignment.Left

local Subtitle = Instance.new("TextLabel", Header)
Subtitle.Size = UDim2.new(1, -40, 0, 20)
Subtitle.Position = UDim2.new(0, 20, 0, 40)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "Enter your key to continue - " .. game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
Subtitle.TextColor3 = Color3.fromRGB(200, 200, 220)
Subtitle.Font = Enum.Font.Gotham
Subtitle.TextSize = 12
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.TextTransparency = 0.3

local MinBtn = Instance.new("TextButton", Header)
MinBtn.Size = UDim2.new(0, 40, 0, 40)
MinBtn.Position = UDim2.new(1, -50, 0, 15)
MinBtn.BackgroundColor3 = Color3.fromRGB(60, 30, 120)
MinBtn.Text = "-"
MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 24
local MinCorner = Instance.new("UICorner", MinBtn)
MinCorner.CornerRadius = UDim.new(0, 8)

local Content = Instance.new("Frame", MainFrame)
Content.Size = UDim2.new(1, -40, 1, -90)
Content.Position = UDim2.new(0, 20, 0, 80)
Content.BackgroundTransparency = 1

local InputBox = Instance.new("TextBox", Content)
InputBox.PlaceholderText = "Enter your key here..."
InputBox.Text = ""
InputBox.Size = UDim2.new(1, 0, 0, 45)
InputBox.Position = UDim2.new(0, 0, 0, 0)
InputBox.BackgroundColor3 = Color3.fromRGB(30, 30, 38)
InputBox.BorderSizePixel = 0
InputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
InputBox.PlaceholderColor3 = Color3.fromRGB(120, 120, 140)
InputBox.TextSize = 15
InputBox.Font = Enum.Font.Gotham
InputBox.ClearTextOnFocus = true 

local InputCorner = Instance.new("UICorner", InputBox)
InputCorner.CornerRadius = UDim.new(0, 10)

local InputStroke = Instance.new("UIStroke", InputBox)
InputStroke.Color = Color3.fromRGB(50, 50, 60)
InputStroke.Thickness = 1
InputStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

InputBox:GetPropertyChangedSignal("Text"):Connect(function()
	InputBox.Text = InputBox.Text:gsub("%s+", "")
end)

local Decline = Instance.new("TextButton", Content)
Decline.Size = UDim2.new(0.48, 0, 0, 40)
Decline.Position = UDim2.new(0, 0, 0, 55)
Decline.BackgroundColor3 = Color3.fromRGB(200, 60, 70)
Decline.Text = "Destroy UI"
Decline.TextColor3 = Color3.fromRGB(255, 255, 255)
Decline.Font = Enum.Font.GothamBold
Decline.TextSize = 14
Decline.AutoButtonColor = false

local DeclineCorner = Instance.new("UICorner", Decline)
DeclineCorner.CornerRadius = UDim.new(0, 10)

local Submit = Instance.new("TextButton", Content)
Submit.Size = UDim2.new(0.48, 0, 0, 40)
Submit.Position = UDim2.new(0.52, 0, 0, 55)
Submit.BackgroundColor3 = Color3.fromRGB(60, 180, 100)
Submit.Text = "Check Key"
Submit.TextColor3 = Color3.fromRGB(255, 255, 255)
Submit.Font = Enum.Font.GothamBold
Submit.TextSize = 14
Submit.AutoButtonColor = false

local SubmitCorner = Instance.new("UICorner", Submit)
SubmitCorner.CornerRadius = UDim.new(0, 10)

local GetKey = Instance.new("TextButton", Content)
GetKey.Size = UDim2.new(0.48, 0, 0, 40)
GetKey.Position = UDim2.new(0, 0, 0, 105)
GetKey.BackgroundColor3 = Color3.fromRGB(50, 100, 200)
GetKey.Text = utf8.char(0x1F4CB) .. " Get Key"
GetKey.TextColor3 = Color3.fromRGB(255, 255, 255)
GetKey.Font = Enum.Font.GothamBold
GetKey.TextSize = 14
GetKey.AutoButtonColor = false

local GetKeyCorner = Instance.new("UICorner", GetKey)
GetKeyCorner.CornerRadius = UDim.new(0, 10)

local DiscordBtn = Instance.new("TextButton", Content)
DiscordBtn.Size = UDim2.new(0.48, 0, 0, 40)
DiscordBtn.Position = UDim2.new(0.52, 0, 0, 105)
DiscordBtn.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
DiscordBtn.Text = utf8.char(0x1F4AC) .. " Discord"
DiscordBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
DiscordBtn.Font = Enum.Font.GothamBold
DiscordBtn.TextSize = 14
DiscordBtn.AutoButtonColor = false

local DiscordCorner = Instance.new("UICorner", DiscordBtn)
DiscordCorner.CornerRadius = UDim.new(0, 10)

local WebsiteBtn = Instance.new("TextButton", Content)
WebsiteBtn.Size = UDim2.new(1, 0, 0, 40)
WebsiteBtn.Position = UDim2.new(0, 0, 0, 155)
WebsiteBtn.BackgroundColor3 = Color3.fromRGB(100, 70, 180)
WebsiteBtn.Text = utf8.char(0x1F310) .. " Copy Website"
WebsiteBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
WebsiteBtn.Font = Enum.Font.GothamBold
WebsiteBtn.TextSize = 14
WebsiteBtn.AutoButtonColor = false

local WebsiteCorner = Instance.new("UICorner", WebsiteBtn)
WebsiteCorner.CornerRadius = UDim.new(0, 10)

local ResetInfo = Instance.new("TextLabel", Content)
ResetInfo.Size = UDim2.new(1, 0, 0, 20)
ResetInfo.Position = UDim2.new(0, -100, 0, 200)
ResetInfo.BackgroundTransparency = 1
ResetInfo.TextColor3 = Color3.fromRGB(200, 200, 200)
ResetInfo.Font = Enum.Font.Gotham
ResetInfo.TextSize = 13
ResetInfo.Text = "Key resets every day at 00:00 UTC"

local TimerLabel = Instance.new("TextLabel", Content)
TimerLabel.Size = UDim2.new(1, 0, 0, 20)
TimerLabel.Position = UDim2.new(0, -121, 0, 220)
TimerLabel.BackgroundTransparency = 1
TimerLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
TimerLabel.Font = Enum.Font.Gotham
TimerLabel.TextSize = 13

RunService.Heartbeat:Connect(function()
	local utc = os.time(os.date("!*t"))
	local t = os.date("!*t", utc)
	local secsLeft = ((24 - t.hour - 1) * 3600) + ((60 - t.min - 1) * 60) + (60 - t.sec)
	local h = math.floor(secsLeft/3600)
	local m = math.floor((secsLeft%3600)/60)
	local s = secsLeft%60
	TimerLabel.Text = string.format("Key Reset in: %02dh %02dm %02ds", h, m, s)
end)

local minimized = false
MinBtn.MouseButton1Click:Connect(function()
	if minimized then
		TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad), {Size = UDim2.new(0, 420, 0, 370)}):Play()
		Content.Visible = true
		minimized = false
	else
		TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad), {Size = UDim2.new(0, 420, 0, 70)}):Play()
		Content.Visible = false
		minimized = true
	end
end)

Submit.MouseButton1Click:Connect(function()
	local userKey = InputBox.Text:gsub("%s+", "")
	if isKeyValid(userKey) then
		saveLastKey(userKey)
		StatusLabel.Text = utf8.char(0x2713).." Key valid! Loading..."
		StatusLabel.TextColor3 = Color3.fromRGB(100,255,100)
		task.wait(0.5)
		ScreenGui:Destroy()
		loadstring(game:HttpGet(exec))()
	else
		InputBox.Text = ""
		InputBox.PlaceholderText = "Invalid key!"
		StatusLabel.Text = utf8.char(0x2715).." Key invalid, try again"
		StatusLabel.TextColor3 = Color3.fromRGB(255,100,100)
		task.wait(2)
		InputBox.PlaceholderText = "Enter your key here..."
		StatusLabel.Text = ""
	end
end)

Decline.MouseButton1Click:Connect(function()
	TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0,0,0,0)}):Play()
	task.wait(0.3)
	ScreenGui:Destroy()
end)

GetKey.MouseButton1Click:Connect(function()
	setclipboard(getKeyLink)
	GetKey.Text = utf8.char(0x2713).." Copied!"
	task.wait(1)
	GetKey.Text = utf8.char(0x1F4CB).." Get Key"
end)

DiscordBtn.MouseButton1Click:Connect(function()
	setclipboard(Discord)
	DiscordBtn.Text = utf8.char(0x2713).." Copied!"
	task.wait(1)
	DiscordBtn.Text = utf8.char(0x1F4AC).." Discord"
end)

WebsiteBtn.MouseButton1Click:Connect(function()
	setclipboard(Website)
	WebsiteBtn.Text = utf8.char(0x2713).." Copied!"
	task.wait(1)
	WebsiteBtn.Text = utf8.char(0x1F310).." Copy Website"
end)

TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(0,420,0,370)}):Play()
MainFrame.Size = UDim2.new(0,0,0,0)
